# netlify.toml - Основной файл конфигурации Netlify

[build]
  # Netlify будет искать код Serverless-функций в этой папке
  functions = "netlify/functions"
  # Если у вас есть статический фронтенд в этом же репозитории, 
  # укажите папку, которую нужно публиковать (например, "public" или "dist").
  # Если фронтенд в другом месте (например, на GitHub Pages), можете оставить по умолчанию.
  publish = "public" 

# Настройка Заголовков (CORS) для всех ваших функций
# Это гарантирует, что браузеры разрешат вашему фронтенду обращаться к API
[[headers]]
  # Применяем эти заголовки ко всем функциям в Netlify
  for = "/.netlify/functions/*" 
  [headers.values]
    Access-Control-Allow-Origin = "*"
    Access-Control-Allow-Methods = "GET, POST, OPTIONS, PUT, PATCH, DELETE"
    Access-Control-Allow-Headers = "X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version, Authorization"

# Если вы хотите, чтобы ваш фронтенд использовал короткие пути типа /api/list,
# а не длинные /.netlify/functions/list, используйте это перенаправление:
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200
